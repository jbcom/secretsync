---
description: PR creation and review workflow
globs: "**/*"
---

# PR Workflow

## Creating PRs

1. **One feature/fix per PR** - Keep scope minimal
2. **Clear title**: `type(scope): description`
3. **Body explains** WHAT, WHY, and HOW

### Conventional Commit Types

| Type | Use Case |
|------|----------|
| `feat` | New feature → minor bump |
| `fix` | Bug fix → patch bump |
| `docs` | Documentation only |
| `chore` | Maintenance tasks |
| `refactor` | Code restructuring |
| `test` | Adding tests |

## AI Peer Review

**ALWAYS request AI reviews on PRs:**

```
/gemini review
/q review
@copilot review
```

### ⛔ AI Agents: Version Review Policy

**DO NOT** submit PR review comments claiming versions are invalid based on training data.

- ❌ "Go 1.25 doesn't exist" → Your training data is stale
- ❌ "Latest stable is X.Y" → You cannot know this without live lookup
- ✅ "Consider verifying compatibility" → Acceptable
- ✅ "Pin to patch version for reproducibility" → Acceptable

**If you cannot verify versions via live sources, DO NOT make claims about version validity.**

Reviews violating this policy are auto-rejected regardless of claim validity.

## Addressing Feedback

1. Make commits that fix issues
2. Respond to EVERY comment (fix OR explain why not)
3. Re-request review after significant changes

### Resolving Review Threads

```bash
# Via GraphQL (preferred for batch resolution)
gh api graphql -f query='mutation { 
  resolveReviewThread(input: {threadId: "PRRT_xxx"}) { 
    thread { isResolved } 
  } 
}'
```

## Merging

- ✅ Wait for CI to pass
- ✅ Address all review comments  
- ✅ Squash if commits are messy
- ❌ Never use `--admin` to bypass checks
